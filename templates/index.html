{% extends "base.html" %}
{% block content %}

<div class="grid">
  <!-- TOC -->
  <section class="card floating">
    <div class="card-head">
      <div>
        <div class="tag">TOC</div>
        <div style="font-weight:900;letter-spacing:.2px;">СИНФ <span style="color:var(--accent)">{{ grade }}</span></div>
      </div>
      <div class="tag">{{ total }} мавзӯъ</div>
    </div>

    <div class="card-body">
      <input class="input"
             name="q"
             type="search"
             placeholder="ҶУСТУҶӮ..."
             hx-get="/partials/toc?grade={{grade}}"
             hx-trigger="keyup changed delay:250ms"
             hx-target="#toc"
             hx-swap="innerHTML"/>

      <div id="toc" style="margin-top:12px; display:flex; flex-direction:column; gap:10px; max-height: 62vh; overflow:auto; padding-right: 4px;">
        {% include "partials/toc.html" %}
      </div>

      <div class="footer-note">Маслиҳат: номи мавзӯъро нависед, то зуд ёбед.</div>
    </div>
  </section>

  <!-- PAGE -->
  <section class="card floating">
    <div class="card-head">
      <div style="display:flex; align-items:center; gap:10px;">
        <i data-lucide="layout" class="icon"></i>
        <div>
          <div class="tag">PAGE</div>
          <div style="font-weight:900;letter-spacing:.2px;">Мавзӯъ ва шарҳ</div>
        </div>
      </div>

      <div class="tag">Формат: Markdown</div>
    </div>

    <div class="card-body">
      {% if topic %}
        {% include "partials/topic_card.html" %}
      {% else %}
        <h1 class="h1">Мавзӯъ интихоб нашудааст</h1>
        <p class="p">Аз феҳрист як мавзӯъро интихоб кунед, то матн дар ин ҷо кушода шавад.</p>

        <div class="blockbox">
          <div class="tag">Функсияҳои нав</div>
          <ul style="margin:10px 0 0; color: var(--muted); line-height:1.8;">
            <li>⚙️ Танзимот: тема, иконка, забон</li>
            <li>Панелҳои плавный ва floating</li>
            <li>Омода барои синфҳои 10–11</li>
          </ul>
        </div>
      {% endif %}
    </div>
  </section>
</div>

<script>
  if (window.lucide) lucide.createIcons();
</script>

{% endblock %}
